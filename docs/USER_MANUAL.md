# IntelliMaint Pro 用户手册

> 版本：v56 | 更新日期：2026-01-14

---

## 目录

1. [系统概述](#1-系统概述)
2. [快速开始](#2-快速开始)
3. [设备管理](#3-设备管理)
4. [标签管理](#4-标签管理)
5. [数据浏览](#5-数据浏览)
6. [告警管理](#6-告警管理)
7. [健康评估](#7-健康评估)
8. [电机故障预测](#8-电机故障预测)
9. [用户管理](#9-用户管理)
10. [系统设置](#10-系统设置)

---

## 1. 系统概述

### 1.1 功能简介

IntelliMaint Pro 是一个工业 AI 预测性维护平台，核心功能包括：

| 功能模块 | 说明 |
|----------|------|
| 实时监控 | 毫秒级数据采集与推送 |
| 健康评估 | 设备健康指数 0-100 |
| 智能告警 | 多级阈值告警引擎 |
| 故障预测 | 电机故障提前预警 |

### 1.2 系统架构

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   PLC/传感器  │────▶│  Edge采集    │────▶│  API服务    │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                    ┌─────────────────────────┼─────────────────────────┐
                    │                         │                         │
                    ▼                         ▼                         ▼
             ┌─────────────┐          ┌─────────────┐          ┌─────────────┐
             │  TimescaleDB │          │  SignalR    │          │  告警引擎    │
             │  时序存储     │          │  实时推送    │          │  规则评估    │
             └─────────────┘          └─────────────┘          └─────────────┘
```

### 1.3 访问地址

| 服务 | URL |
|------|-----|
| 前端界面 | http://localhost:8080 |
| API服务 | http://localhost:5001 |
| API文档 | http://localhost:5001/swagger |

### 1.4 默认账号

| 角色 | 用户名 | 密码 | 权限 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 全部权限 |
| 操作员 | operator | operator123 | 操作权限 |
| 查看者 | viewer | viewer123 | 只读权限 |

---

## 2. 快速开始

### 2.1 登录系统

1. 打开浏览器访问 http://localhost:8080
2. 输入用户名和密码
3. 点击"登录"按钮

### 2.2 界面导航

```
┌─────────────────────────────────────────────────────────┐
│  IntelliMaint Pro                    [用户名] [退出]     │
├─────────────┬───────────────────────────────────────────┤
│             │                                           │
│  仪表盘      │         主内容区域                         │
│  设备管理    │                                           │
│  标签管理    │                                           │
│  数据浏览    │                                           │
│  告警管理    │                                           │
│  告警规则    │                                           │
│  健康评估    │                                           │
│  电机配置    │                                           │
│  故障预测    │                                           │
│  用户管理    │                                           │
│  系统设置    │                                           │
│             │                                           │
└─────────────┴───────────────────────────────────────────┘
```

---

## 3. 设备管理

### 3.1 设备列表

显示所有已配置的采集设备，包括：
- 设备名称
- 设备类型（OPC UA / LibPlcTag）
- 连接状态
- 标签数量

### 3.2 添加设备

1. 点击"新建设备"按钮
2. 填写设备信息：
   - 名称：设备标识名
   - 类型：选择协议类型
   - 连接字符串：协议连接参数
3. 点击"保存"

### 3.3 设备操作

| 操作 | 说明 |
|------|------|
| 编辑 | 修改设备配置 |
| 删除 | 删除设备（需先删除关联标签） |
| 查看标签 | 跳转到该设备的标签列表 |

---

## 4. 标签管理

### 4.1 标签配置

| 字段 | 说明 | 示例 |
|------|------|------|
| 标签名 | 唯一标识 | Motor1.Current |
| 地址 | PLC地址 | DB1.DBD0 |
| 数据类型 | 值类型 | Float32 |
| 采集周期 | 毫秒 | 1000 |
| 单位 | 工程单位 | A |

### 4.2 批量导入

支持 CSV 格式批量导入标签配置。

---

## 5. 数据浏览

### 5.1 实时数据

- 显示所有标签的最新值
- 自动刷新（SignalR 推送）
- 支持按设备筛选

### 5.2 历史查询

1. 选择时间范围
2. 选择标签
3. 点击"查询"
4. 支持图表/表格切换

---

## 6. 告警管理

### 6.1 告警级别

| 级别 | 颜色 | 说明 |
|------|------|------|
| Info | 蓝色 | 提示信息 |
| Warning | 黄色 | 警告 |
| Error | 橙色 | 错误 |
| Critical | 红色 | 严重 |

### 6.2 告警操作

- **确认**：确认已知悉该告警
- **静默**：暂时屏蔽该类告警
- **查看详情**：跳转到相关数据

### 6.3 告警规则配置

1. 进入"告警规则"页面
2. 点击"新建规则"
3. 配置：
   - 规则名称
   - 关联标签
   - 触发条件（>, <, =, !=）
   - 阈值
   - 告警级别
   - 防抖时间

---

## 7. 健康评估

### 7.1 健康指数

设备健康指数范围 0-100：

| 范围 | 状态 | 建议 |
|------|------|------|
| 80-100 | 优秀 | 正常运行 |
| 60-79 | 良好 | 关注趋势 |
| 40-59 | 一般 | 计划维护 |
| 20-39 | 较差 | 尽快维护 |
| 0-19 | 危险 | 立即处理 |

### 7.2 评估维度

- 设备状态指标
- 告警频率
- 参数波动
- 历史趋势

---

## 8. 电机故障预测

### 8.1 功能概述

电机故障预测模块通过实时采集电机运行参数（电流、振动、温度等），与历史基线数据对比，自动检测异常偏离并诊断潜在故障。

### 8.2 基本使用流程

#### 步骤1：创建电机模型

**路径**: 电机配置 → 电机模型 → 新建

填写电机铭牌参数：

| 参数 | 说明 | 示例 |
|------|------|------|
| 名称 | 模型标识名 | ABB-M3BP-160 |
| 类型 | Induction/PMSM/DC | Induction |
| 额定功率 (kW) | 铭牌功率 | 15 |
| 额定电压 (V) | 铭牌电压 | 380 |
| 额定电流 (A) | 铭牌电流 | 28.5 |
| 额定转速 (RPM) | 铭牌转速 | 1470 |
| 额定频率 (Hz) | 供电频率 | 50 |
| 极对数 | 磁极对数 | 2 |

#### 步骤2：创建电机实例

**路径**: 电机配置 → 电机实例 → 新建

| 参数 | 说明 |
|------|------|
| 名称 | 实例标识（如：1#风机电机） |
| 电机模型 | 选择已创建的模型 |
| 关联设备 | 选择数据采集设备 |
| 安装位置 | 物理位置描述 |
| 资产编号 | 设备资产号 |

#### 步骤3：配置参数映射

**路径**: 电机配置 → 选择实例 → 参数映射

将采集标签映射到电机参数：

| 电机参数 | 说明 | 标签示例 |
|----------|------|----------|
| `CurrentA` | A相电流 | PLC.Motor1.CurrentA |
| `CurrentB` | B相电流 | PLC.Motor1.CurrentB |
| `CurrentC` | C相电流 | PLC.Motor1.CurrentC |
| `VibrationX` | X轴振动 | PLC.Motor1.VibX |
| `VibrationY` | Y轴振动 | PLC.Motor1.VibY |
| `Temperature` | 绕组温度 | PLC.Motor1.Temp |
| `Speed` | 实际转速 | PLC.Motor1.Speed |
| `Running` | 运行状态 | PLC.Motor1.Running |

#### 步骤4：创建操作模式

**路径**: 电机配置 → 选择实例 → 操作模式

不同工况下电机参数基线不同，需分别建模：

| 模式 | 触发条件示例 | 说明 |
|------|--------------|------|
| 空载运行 | Speed: 1450-1500 RPM | 无负载启动 |
| 轻载运行 | Current: 10-15 A | 低负载工况 |
| 满载运行 | Current: 25-30 A | 额定负载 |
| 变频50% | Frequency: 25 Hz | 变频器半速 |

**触发条件设置**:
- 选择触发标签（如 Running 或 Speed）
- 设置触发范围（Min ~ Max）
- 设置优先级（数值越大优先级越高）

#### 步骤5：基线学习

**路径**: 电机故障预测 → 选择实例 → 基线学习

1. **确保电机正常运行** - 在各操作模式下稳定运行
2. **点击"学习全部模式"** - 系统自动采集各模式数据
3. **等待学习完成** - 通常需要积累足够样本（默认100个）

学习完成后，每个参数会生成基线：
- 均值 (Mean)
- 标准差 (StdDev)
- 最小值/最大值

#### 步骤6：执行故障诊断

**路径**: 电机故障预测 → 选择实例 → 诊断

**诊断流程**:
1. 系统检测当前操作模式
2. 获取实时参数值
3. 与对应模式基线对比
4. 计算偏离程度（Z-Score）
5. 生成诊断报告

**偏离等级**:

| Z-Score | 等级 | 说明 |
|---------|------|------|
| < 2σ | 正常 | 参数在正常范围 |
| 2σ ~ 3σ | 轻微 | 需关注 |
| 3σ ~ 4σ | 中度 | 建议检查 |
| 4σ ~ 5σ | 严重 | 需要维护 |
| > 5σ | 危急 | 立即处理 |

### 8.3 常见故障类型

| 故障类型 | 特征参数 | 诊断依据 |
|----------|----------|----------|
| 轴承磨损 | 振动增大 | VibX/VibY 超标 |
| 绕组过热 | 温度升高 | Temperature 超标 |
| 相间不平衡 | 电流差异 | CurrentA/B/C 偏差 |
| 过载运行 | 电流过大 | Current > 额定值 |
| 转子故障 | 转速异常 | Speed 波动 |

### 8.4 诊断失败排查

| 错误信息 | 原因 | 解决方案 |
|----------|------|----------|
| 电机实例不存在 | ID错误 | 检查实例ID |
| 未启用诊断功能 | 实例禁用 | 启用诊断开关 |
| 未配置参数映射 | 无映射 | 添加标签映射 |
| 无匹配运行模式 | 触发条件不满足 | 调整触发范围 |
| 无基线数据 | 未学习 | 执行基线学习 |

### 8.5 特殊设备配置指南

#### 8.5.1 翻车机配置

##### 设备特征
- 周期性翻转（0° → 180° → 0°）
- 重载翻转 vs 空载回位
- 翻转/回位两个方向

##### 参数映射

| 电机参数 | 对应标签 | 说明 |
|----------|----------|------|
| `CurrentA/B/C` | 翻车机.电流A/B/C | 三相电流 |
| `Speed` | 翻车机.转速 | 电机转速 |
| `Torque` | 翻车机.扭矩 | 负载扭矩 |
| `Temperature` | 翻车机.绕组温度 | 电机温度 |
| `VibrationX/Y` | 翻车机.振动X/Y | 振动信号 |
| `Position` | 翻车机.翻转角度 | 0-180° |
| `Direction` | 翻车机.方向 | 1=翻转, 0=回位 |
| `LoadStatus` | 翻车机.载货状态 | 1=重载, 0=空载 |

##### 操作模式设计

```
┌─────────────────────────────────────────────────────────┐
│                    翻车机工作周期                         │
├─────────────────────────────────────────────────────────┤
│  [重载翻转] → [翻转到位] → [空载回位] → [回位到位] → ...  │
│     ↑            ↑            ↑            ↑            │
│   模式1        模式2        模式3        模式4          │
└─────────────────────────────────────────────────────────┘
```

| 模式名称 | 触发标签 | 触发条件 | 优先级 | 说明 |
|----------|----------|----------|--------|------|
| 重载翻转 | Direction | 1 (且 LoadStatus=1) | 10 | 带货翻转，电流最大 |
| 空载翻转 | Direction | 1 (且 LoadStatus=0) | 9 | 空车翻转 |
| 重载回位 | Direction | 0 (且 LoadStatus=1) | 8 | 带货回位（异常情况）|
| 空载回位 | Direction | 0 (且 LoadStatus=0) | 7 | 正常回位 |
| 翻转到位保持 | Position | 175-180 | 6 | 到位停止状态 |
| 回位到位保持 | Position | 0-5 | 5 | 原位停止状态 |
| 待机 | Speed | 0-1 | 1 | 静止待机 |

##### PLC组合状态字（推荐方案）

由于系统支持单一触发标签，建议在PLC侧创建**组合状态字**：

```
PLC逻辑:
IF Direction = 1 AND LoadStatus = 1 THEN
    WorkMode := 1;  // 重载翻转
ELSIF Direction = 1 AND LoadStatus = 0 THEN
    WorkMode := 2;  // 空载翻转
ELSIF Direction = 0 AND LoadStatus = 1 THEN
    WorkMode := 3;  // 重载回位
ELSIF Direction = 0 AND LoadStatus = 0 THEN
    WorkMode := 4;  // 空载回位
ELSIF Speed < 1 AND Position < 5 THEN
    WorkMode := 0;  // 待机
END_IF;
```

然后用 `WorkMode` 作为触发标签：

| 模式 | 触发标签 | Min | Max |
|------|----------|-----|-----|
| 重载翻转 | 翻车机.WorkMode | 1 | 1 |
| 空载翻转 | 翻车机.WorkMode | 2 | 2 |
| 重载回位 | 翻车机.WorkMode | 3 | 3 |
| 空载回位 | 翻车机.WorkMode | 4 | 4 |
| 待机 | 翻车机.WorkMode | 0 | 0 |

##### 翻车机异常检测

| 故障类型 | 异常表现 | 检测模式 |
|----------|----------|----------|
| 轴承磨损 | 重载翻转时振动增大 | 重载翻转 |
| 制动器故障 | 回位时电流异常 | 空载回位 |
| 减速机问题 | 翻转扭矩波动 | 重载翻转 |
| 过载 | 所有模式电流偏高 | 全模式 |

#### 8.5.2 定位车配置

##### 设备特征
- 双向运行（前进/后退）
- 变速运行（低速定位/高速行走）
- 负载变化（重载/轻载/空载）

##### 参数映射

| 电机参数 | 对应标签 | 说明 |
|----------|----------|------|
| `CurrentA/B/C` | 定位车.电流A/B/C | 三相电流 |
| `Speed` | 定位车.实际速度 | 行走速度 m/min |
| `SpeedRef` | 定位车.速度给定 | 速度设定值 |
| `Position` | 定位车.位置 | 当前位置 mm |
| `Direction` | 定位车.方向 | 1=前进, -1=后退, 0=停止 |
| `LoadWeight` | 定位车.载重 | 负载重量 kg |
| `VibrationX` | 定位车.振动 | 车体振动 |
| `Temperature` | 定位车.电机温度 | 驱动电机温度 |

##### 操作模式设计

```
         低速档                    高速档
    ┌──────────────┐         ┌──────────────┐
    │  重载前进低速  │         │  重载前进高速  │
    │  重载后退低速  │         │  重载后退高速  │
    │  轻载前进低速  │         │  轻载前进高速  │
    │  轻载后退低速  │         │  轻载后退高速  │
    │  空载前进低速  │         │  空载前进高速  │
    │  空载后退低速  │         │  空载后退高速  │
    └──────────────┘         └──────────────┘
              ↓
         定位/点动模式
```

##### 简化方案：按负载+速度分类

| 模式名称 | 触发标签 | Min | Max | 典型电流范围 |
|----------|----------|-----|-----|--------------|
| 重载高速 | 定位车.WorkMode | 11 | 11 | 80-100% |
| 重载低速 | 定位车.WorkMode | 12 | 12 | 60-80% |
| 轻载高速 | 定位车.WorkMode | 21 | 21 | 50-70% |
| 轻载低速 | 定位车.WorkMode | 22 | 22 | 30-50% |
| 空载高速 | 定位车.WorkMode | 31 | 31 | 30-40% |
| 空载低速 | 定位车.WorkMode | 32 | 32 | 15-25% |
| 定位点动 | 定位车.WorkMode | 40 | 40 | 20-30% |
| 待机 | 定位车.WorkMode | 0 | 0 | < 5% |

##### PLC组合状态逻辑

```
// 负载判断
IF LoadWeight > 5000 THEN
    LoadLevel := 10;  // 重载
ELSIF LoadWeight > 1000 THEN
    LoadLevel := 20;  // 轻载
ELSE
    LoadLevel := 30;  // 空载
END_IF;

// 速度判断
IF ABS(Speed) > 30 THEN
    SpeedLevel := 1;  // 高速
ELSIF ABS(Speed) > 5 THEN
    SpeedLevel := 2;  // 低速
ELSIF ABS(Speed) > 0.5 THEN
    SpeedLevel := 40; // 点动（覆盖负载）
ELSE
    SpeedLevel := 0;  // 停止
END_IF;

// 组合
IF SpeedLevel = 40 THEN
    WorkMode := 40;  // 点动模式优先
ELSIF SpeedLevel = 0 THEN
    WorkMode := 0;   // 待机
ELSE
    WorkMode := LoadLevel + SpeedLevel;
END_IF;
```

##### 定位车异常检测

| 故障类型 | 异常表现 | 检测模式 |
|----------|----------|----------|
| 车轮磨损 | 空载时振动增大 | 空载高速 |
| 导轨异常 | 特定位置电流突增 | 多模式 |
| 编码器故障 | 点动时速度波动 | 定位点动 |
| 电机过热 | 重载高速温升过快 | 重载高速 |

#### 8.5.3 配置步骤总结

```
┌─────────────────────────────────────────────────────────┐
│ 步骤1: PLC侧准备                                         │
├─────────────────────────────────────────────────────────┤
│ • 创建 WorkMode 组合状态字                               │
│ • 确保所有参数标签可采集                                  │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤2: 创建电机模型                                       │
├─────────────────────────────────────────────────────────┤
│ • 填写翻车机/定位车驱动电机铭牌参数                        │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤3: 创建电机实例                                       │
├─────────────────────────────────────────────────────────┤
│ • 关联设备和电机模型                                      │
│ • 启用诊断功能                                           │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤4: 配置参数映射                                       │
├─────────────────────────────────────────────────────────┤
│ • 映射电流、温度、振动等核心参数                          │
│ • 映射 WorkMode 状态字                                   │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤5: 创建操作模式                                       │
├─────────────────────────────────────────────────────────┤
│ • 为每种工况创建独立模式                                  │
│ • 设置 WorkMode 触发范围                                 │
│ • 设置优先级                                             │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤6: 基线学习                                          │
├─────────────────────────────────────────────────────────┤
│ • 设备正常运行，覆盖所有工况                              │
│ • 执行"学习全部模式"                                     │
│ • 确认每个模式都有基线数据                                │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│ 步骤7: 实时诊断                                          │
├─────────────────────────────────────────────────────────┤
│ • 系统自动匹配当前工况                                    │
│ • 与对应基线对比                                         │
│ • 检测异常偏离                                           │
└─────────────────────────────────────────────────────────┘
```

### 8.6 最佳实践

1. **基线学习时机** - 确保电机处于正常健康状态
2. **多模式覆盖** - 为所有常用工况创建操作模式
3. **工况不宜过多** - 5-8个核心工况即可，过多会增加维护成本
4. **组合状态字** - 在PLC侧实现复合条件，简化触发条件配置
5. **定期更新基线** - 每3-6个月重新学习
6. **阈值调优** - 根据实际情况调整偏离阈值
7. **结合告警** - 启用告警生成，及时通知异常
8. **先跑数据再学习** - 确保每个模式有足够样本（>100个）

---

## 9. 用户管理

### 9.1 角色权限

| 权限 | Admin | Operator | Viewer |
|------|-------|----------|--------|
| 查看数据 | ✅ | ✅ | ✅ |
| 确认告警 | ✅ | ✅ | ❌ |
| 配置设备 | ✅ | ✅ | ❌ |
| 配置规则 | ✅ | ✅ | ❌ |
| 用户管理 | ✅ | ❌ | ❌ |
| 系统设置 | ✅ | ❌ | ❌ |

### 9.2 用户操作

- **添加用户**：Admin 可创建新用户
- **修改密码**：用户可修改自己的密码
- **禁用用户**：Admin 可禁用/启用用户

---

## 10. 系统设置

### 10.1 数据库信息

显示当前数据库状态：
- 数据库类型（SQLite/TimescaleDB）
- 数据量统计
- 连接状态

### 10.2 Edge 配置

管理边缘采集节点配置。

### 10.3 系统维护

- 数据清理策略
- 日志级别设置
- 缓存管理

---

## 附录

### A. 支持的数据类型

| 类型 | 说明 |
|------|------|
| Boolean | 布尔值 |
| Int16 | 16位整数 |
| Int32 | 32位整数 |
| Int64 | 64位整数 |
| Float32 | 单精度浮点 |
| Float64 | 双精度浮点 |
| String | 字符串 |

### B. API 端点列表

| 端点 | 方法 | 说明 |
|------|------|------|
| /api/auth/login | POST | 登录 |
| /api/auth/refresh | POST | 刷新Token |
| /api/devices | GET/POST | 设备管理 |
| /api/tags | GET/POST | 标签管理 |
| /api/telemetry/query | GET | 数据查询 |
| /api/alarms | GET | 告警列表 |
| /api/alarm-rules | GET/POST | 告警规则 |
| /api/motor-models | GET/POST | 电机模型 |
| /api/motor-instances | GET/POST | 电机实例 |
| /api/health | GET | 健康检查 |

### C. 快捷键

| 快捷键 | 功能 |
|--------|------|
| F5 | 刷新页面 |
| Ctrl+F | 搜索 |
| Esc | 关闭弹窗 |

---

*文档版本：v56.0*
*最后更新：2026-01-14*
