---
name: analyze
description: 分析项目代码质量、架构健康度、技术债务
---

# 项目分析任务

请执行全面的项目分析：

## 1. 代码统计

分析项目代码量：

```bash
# 统计代码行数
find src -name "*.cs" | xargs wc -l
find intellimaint-ui/src -name "*.tsx" -o -name "*.ts" | xargs wc -l
```

生成统计报告：
- 后端代码行数
- 前端代码行数
- 测试代码行数
- 文件数量

## 2. 架构分析

使用 `architect` 视角分析：

### 模块依赖
- 核心层依赖是否正确？
- 是否有循环依赖？
- 层次边界是否清晰？

### 架构一致性
- 是否符合分层架构？
- 接口抽象是否合理？
- 是否有架构违规？

## 3. 代码质量分析

使用 `code-reviewer` 视角分析：

### 代码坏味道
- 过长的方法
- 过大的类
- 重复代码
- 复杂的条件
- 魔法数字

### 命名质量
- 是否遵循命名规范？
- 命名是否有意义？

## 4. 安全分析

使用 `security-expert` 视角分析：

### 安全检查
- SQL 注入风险
- XSS 风险
- 硬编码敏感信息
- 认证授权漏洞

## 5. 性能分析

使用 `performance-expert` 视角分析：

### 潜在性能问题
- 同步阻塞调用
- N+1 查询
- 缺少索引
- 内存泄漏风险

## 6. 技术债务识别

### 债务分类
- **架构债务**: 需要重构的架构问题
- **代码债务**: 需要清理的代码问题
- **测试债务**: 缺失的测试覆盖
- **文档债务**: 缺失的文档

### 债务评估
| 债务项 | 严重程度 | 修复成本 | 优先级 |
|--------|----------|----------|--------|
| xxx | 高/中/低 | 大/中/小 | P0-P3 |

## 7. 生成分析报告

```markdown
# 项目分析报告

## 概要
- **分析日期**: xxx
- **项目版本**: vXX
- **整体健康度**: ⭐⭐⭐⭐ (4/5)

## 代码统计
| 模块 | 文件数 | 代码行数 |
|------|--------|----------|
| Core | xx | xxxx |
| Infrastructure | xx | xxxx |
| Host.Api | xx | xxxx |
| UI | xx | xxxx |
| Tests | xx | xxxx |
| **总计** | xx | xxxx |

## 架构健康度

### 优点
- ✅ xxx
- ✅ xxx

### 问题
- ⚠️ xxx
- ⚠️ xxx

## 代码质量

### 优点
- ✅ xxx

### 需改进
- ⚠️ xxx

## 安全状态
- [x] SQL 注入防护
- [x] 认证机制
- [ ] xxx 需要改进

## 性能状态
- [x] 异步编程
- [ ] xxx 需要优化

## 技术债务清单

### 高优先级
1. xxx

### 中优先级
1. xxx

### 低优先级
1. xxx

## 建议行动

### 短期（1-2周）
1. xxx

### 中期（1个月）
1. xxx

### 长期（3个月）
1. xxx
```

---

**分析原则**：
1. 客观公正，基于事实
2. 量化指标优先
3. 提供可行建议
4. 关注投入产出比
