# IntelliMaint Pro

**å·¥ä¸šè®¾å¤‡é¢„æµ‹æ€§ç»´æŠ¤å¹³å°** - é›¶æ”¹é€ ã€é›¶ä¼ æ„Ÿå™¨ï¼Œè®©æ¯å° PLC/å˜é¢‘å™¨å˜æˆæ™ºèƒ½é¢„è­¦ç»ˆç«¯

[![Version](https://img.shields.io/badge/version-v56-blue.svg)](./docs/CHANGELOG_V55.md)
[![.NET](https://img.shields.io/badge/.NET-8.0-purple.svg)](https://dotnet.microsoft.com/)
[![React](https://img.shields.io/badge/React-18-61dafb.svg)](https://reactjs.org/)
[![License](https://img.shields.io/badge/license-Proprietary-red.svg)]()

---

## ğŸ¯ æ ¸å¿ƒèƒ½åŠ›

| åŠŸèƒ½ | è¯´æ˜ | çŠ¶æ€ |
|------|------|------|
| ğŸ”® **æ•…éšœé¢„è­¦** | æå‰ 72h+ é¢„è­¦ï¼Œå‡å°‘éè®¡åˆ’åœæœº 60%+ | ğŸš§ å¼€å‘ä¸­ |
| ğŸ“Š **å¥åº·è¯„ä¼°** | 0-100 å¥åº·æŒ‡æ•°ï¼Œå®æ—¶é‡åŒ–è®¾å¤‡çŠ¶æ€ | ğŸš§ å¼€å‘ä¸­ |
| ğŸ“ˆ **å®æ—¶ç›‘æ§** | SignalR æ¨é€ï¼Œç§’çº§æ•°æ®æ›´æ–° | âœ… å·²å®Œæˆ |
| ğŸ”” **æ™ºèƒ½å‘Šè­¦** | è§„åˆ™å¼•æ“ + é˜ˆå€¼ç›‘æ§ | âœ… å·²å®Œæˆ |
| ğŸ”’ **å®‰å…¨è®¤è¯** | JWT + RBAC + è¯·æ±‚é™æµ | âœ… å·²å®Œæˆ |
| ğŸ“ **å®¡è®¡è¿½æº¯** | å…¨æ“ä½œå®¡è®¡æ—¥å¿— + IP è®°å½• | âœ… å·²å®Œæˆ |
| ğŸ”Œ **LibPlcTag æ¨¡æ‹Ÿ** | Allen-Bradley PLC æ¨¡æ‹Ÿæ¨¡å¼ | âœ… **v56 æ–°å¢** |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- .NET 8 SDK
- Node.js 18+
- npm 9+

### å¯åŠ¨æœåŠ¡

```bash
# 1. è§£å‹é¡¹ç›®
unzip intellimaint-pro-v56.zip
cd intellimaint-pro-v56

# 2. å¯åŠ¨åç«¯ (ç«¯å£ 5000)
dotnet run --project src/Host.Api

# 3. å¯åŠ¨ Edge æ¨¡æ‹Ÿé‡‡é›† (å¯é€‰ï¼Œç«¯å£ç‹¬ç«‹)
dotnet run --project src/Host.Edge

# 4. å®‰è£…ä¾èµ–å¹¶å¯åŠ¨å‰ç«¯ (ç«¯å£ 3000)
cd intellimaint-ui
npm install
npm run dev

# 5. è®¿é—®
http://localhost:3000
```

### é»˜è®¤è´¦å·

| ç”¨æˆ·å | å¯†ç  | è§’è‰² |
|--------|------|------|
| admin | admin123 | Admin (å…¨éƒ¨æƒé™) |

---

## âš¡ v56 æ–°ç‰¹æ€§ï¼šLibPlcTag æ¨¡æ‹Ÿæ¨¡å¼

### æ— éœ€çœŸå® PLC å³å¯æµ‹è¯•

```json
// Host.Edge/appsettings.json
"Protocols": {
  "LibPlcTag": {
    "Enabled": true,
    "SimulationMode": true,  // â† å¯ç”¨æ¨¡æ‹Ÿ
    "Plcs": [...]
  }
}
```

### æ¨¡æ‹Ÿæ•°æ®ç±»å‹

| æ ‡ç­¾åå…³é”®å­— | æ¨¡å¼ | ç‰¹å¾ |
|-------------|------|------|
| `TEMP/CURRENT/SPEED` | æ­£å¼¦æ³¢ | å‘¨æœŸ30sï¼Œæœ‰å™ªå£° |
| `LEVEL/PRESSURE/FLOW` | éšæœºæ¸¸èµ° | å¹³æ»‘æ³¢åŠ¨ |
| `COUNT/TOTAL/PROD` | è®¡æ•°å™¨ | éšæœºé€’å¢ |
| `SETPOINT/RAMP` | é”¯é½¿æ³¢ | å‘¨æœŸ60s |
| CipType=BOOL | åˆ‡æ¢ | 5%æ¦‚ç‡ç¿»è½¬ |

### å‰ç«¯å®Œæ•´æ”¯æŒ

- **è®¾å¤‡ç®¡ç†**ï¼šé€‰æ‹© LibPlcTag åè®®æ—¶æ˜¾ç¤º PlcTypeã€Pathã€Slot å­—æ®µ
- **æ ‡ç­¾ç®¡ç†**ï¼šLibPlcTag è®¾å¤‡æ˜¾ç¤º CipType é€‰æ‹©ï¼Œè‡ªåŠ¨æ˜ å°„åˆ° DataType

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç”¨æˆ·å±‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           React 18 + Ant Design + Recharts          â”‚    â”‚
â”‚  â”‚              (ç«¯å£ 3000)                             â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚ HTTP / SignalR                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â–¼            æœåŠ¡å±‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           .NET 8 Minimal API + SignalR              â”‚    â”‚
â”‚  â”‚         JWT + RBAC + é™æµ (ç«¯å£ 5000)                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                         â”‚                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â–¼            æ•°æ®å±‚                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚   SQLite     â”‚  â”‚   Pipeline   â”‚  â”‚  Protocols   â”‚       â”‚
â”‚  â”‚   æ•°æ®å­˜å‚¨    â”‚  â”‚   æ•°æ®ç®¡é“    â”‚  â”‚  OPC UA      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  LibPlcTag â­â”‚       â”‚
â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| **åç«¯æ¡†æ¶** | .NET 8 Minimal API |
| **æ•°æ®åº“** | SQLite (MVP) â†’ TimescaleDB (ç”Ÿäº§) |
| **å®æ—¶é€šä¿¡** | SignalR WebSocket |
| **è®¤è¯æˆæƒ** | JWT + Refresh Token + RBAC |
| **å‰ç«¯æ¡†æ¶** | React 18 + TypeScript |
| **UI ç»„ä»¶** | Ant Design 5.x |
| **å›¾è¡¨** | Recharts + ECharts |
| **å·¥ä¸šåè®®** | OPC UA / LibPlcTag (Allen-Bradley) |

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
intellimaint-pro/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Core/                      # æ ¸å¿ƒå±‚ï¼ˆæ¥å£ + å¥‘çº¦ï¼‰
â”‚   â”‚   â”œâ”€â”€ Abstractions/          # æ¥å£å®šä¹‰
â”‚   â”‚   â””â”€â”€ Contracts/             # DTOã€å®ä½“ã€æšä¸¾
â”‚   â”‚
â”‚   â”œâ”€â”€ Infrastructure/            # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ Sqlite/                # SQLite ä»“å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ Pipeline/              # æ•°æ®é‡‡é›†ç®¡é“
â”‚   â”‚   â””â”€â”€ Protocols/
â”‚   â”‚       â”œâ”€â”€ OpcUa/             # OPC UA åè®®
â”‚   â”‚       â””â”€â”€ LibPlcTag/         # Allen-Bradley (v56 å¢å¼º) â­
â”‚   â”‚           â”œâ”€â”€ LibPlcTagCollector.cs
â”‚   â”‚           â”œâ”€â”€ SimulatedTagReader.cs     # æ¨¡æ‹Ÿå™¨
â”‚   â”‚           â””â”€â”€ LibPlcTagConfigAdapter.cs # DBé…ç½®
â”‚   â”‚
â”‚   â”œâ”€â”€ Host.Api/                  # API æœåŠ¡ (ç«¯å£ 5000)
â”‚   â”‚   â”œâ”€â”€ Endpoints/             # Minimal API ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ Hubs/                  # SignalR Hub
â”‚   â”‚   â””â”€â”€ Services/              # åå°æœåŠ¡
â”‚   â”‚
â”‚   â””â”€â”€ Host.Edge/                 # è¾¹ç¼˜é‡‡é›†æœåŠ¡
â”‚       â””â”€â”€ appsettings.json       # æ¨¡æ‹Ÿé…ç½®
â”‚
â”œâ”€â”€ intellimaint-ui/               # React å‰ç«¯ (ç«¯å£ 3000)
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ api/                   # API è°ƒç”¨
â”‚       â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ DeviceManagement/  # v56: PlcType/Path/Slot
â”‚       â”‚   â””â”€â”€ TagManagement/     # v56: CipType æ”¯æŒ
â”‚       â””â”€â”€ types/
â”‚           â”œâ”€â”€ device.ts          # v56: LibPlcTag åè®®
â”‚           â””â”€â”€ tag.ts             # v56: CipType é€‰é¡¹
â”‚
â”œâ”€â”€ tests/                         # æµ‹è¯•
â””â”€â”€ docs/                          # æ–‡æ¡£
    â”œâ”€â”€ CHANGELOG_V55.md           # v56 å˜æ›´æ—¥å¿— â­
    â””â”€â”€ PROJECT_KNOWLEDGE.md       # é¡¹ç›®çŸ¥è¯†åº“
```

---

## ğŸ”Œ API é€ŸæŸ¥

### è®¤è¯ API
```
POST /api/auth/login     - ç™»å½• â†’ {token, refreshToken}
POST /api/auth/refresh   - åˆ·æ–° Token
POST /api/auth/logout    - ç™»å‡º
```

### è®¾å¤‡ API
```
GET    /api/devices          - è®¾å¤‡åˆ—è¡¨
GET    /api/devices/{id}     - è·å–å•ä¸ª
POST   /api/devices          - åˆ›å»º
PUT    /api/devices/{id}     - æ›´æ–°
DELETE /api/devices/{id}     - åˆ é™¤ (Admin)
```

### é¥æµ‹ API
```
GET /api/telemetry/query     - æŸ¥è¯¢æ•°æ®
GET /api/telemetry/latest    - æœ€æ–°å€¼
GET /api/telemetry/tags      - æ ‡ç­¾åˆ—è¡¨
GET /api/telemetry/aggregate - èšåˆæŸ¥è¯¢
```

### å‘Šè­¦ API
```
GET  /api/alarms             - æŸ¥è¯¢å‘Šè­¦ (?status=0|1|2)
GET  /api/alarms/stats       - ç»Ÿè®¡
POST /api/alarms/{id}/ack    - ç¡®è®¤
POST /api/alarms/{id}/close  - å…³é—­
```

### SignalR
```
Hub URL: /hubs/telemetry
è®¤è¯: Query String access_token æˆ– Header Authorization
æ–¹æ³•: SubscribeAll(), SubscribeDevice(id), UnsubscribeAll()
æ¨é€: ReceiveData (å¤§å†™ D)
```

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ |
|------|------|
| **JWT è®¤è¯** | 15 åˆ†é’Ÿ Access Token + 7 å¤© Refresh Token |
| **RBAC æƒé™** | Admin / Operator / Viewer ä¸‰çº§ |
| **SignalR æˆæƒ** | Hub éœ€è¦è®¤è¯ï¼Œæœªç™»å½•æ— æ³•è¿æ¥ |
| **è¯·æ±‚é™æµ** | 60 ç§’ / 100 æ¬¡ï¼ŒæŒ‰ IP é™åˆ¶ |
| **å¯†é’¥å¤–ç½®** | æ”¯æŒç¯å¢ƒå˜é‡ `JWT_SECRET_KEY` |
| **å®¡è®¡æ—¥å¿—** | å…¨æ“ä½œè®°å½• + IP åœ°å€ |

### ç”Ÿäº§ç¯å¢ƒé…ç½®

```bash
# å¿…é¡»è®¾ç½® JWT å¯†é’¥ï¼ˆè‡³å°‘ 32 å­—ç¬¦ï¼‰
export JWT_SECRET_KEY="your-production-secret-key-at-least-32-chars"

# å¯åŠ¨
dotnet run --project src/Host.Api
```

---

## ğŸ“Š åŠŸèƒ½é¡µé¢

| è·¯ç”± | é¡µé¢ | æƒé™ |
|------|------|------|
| /login | ç™»å½•é¡µ | å…¬å¼€ |
| /dashboard | å®æ—¶ç›‘æ§çœ‹æ¿ | æ‰€æœ‰ç”¨æˆ· |
| /devices | è®¾å¤‡ç®¡ç† (v56: LibPlcTag) â­ | æ‰€æœ‰ç”¨æˆ· |
| /tags | æ ‡ç­¾ç®¡ç† (v56: CipType) â­ | æ‰€æœ‰ç”¨æˆ· |
| /data-explorer | æ•°æ®æŸ¥è¯¢ | æ‰€æœ‰ç”¨æˆ· |
| /alarms | å‘Šè­¦ç®¡ç† | æ‰€æœ‰ç”¨æˆ· |
| /alarm-rules | å‘Šè­¦è§„åˆ™ | Operator+ |
| /settings | ç³»ç»Ÿè®¾ç½® | Admin |
| /users | ç”¨æˆ·ç®¡ç† | Admin |
| /audit | å®¡è®¡æ—¥å¿— | Admin |

---

## ğŸ“ˆ å¼€å‘è¿›åº¦

### å·²å®Œæˆ âœ…

- [x] æ•°æ®é‡‡é›† (OPC UA / LibPlcTag)
- [x] LibPlcTag æ¨¡æ‹Ÿæ¨¡å¼ (v56) â­
- [x] LibPlcTag å‰ç«¯æ”¯æŒ (v56) â­
- [x] æ•°æ®ç®¡é“ (Pipeline + èƒŒå‹å¤„ç†)
- [x] REST API (12 ä¸ªæ¨¡å—)
- [x] SignalR å®æ—¶æ¨é€
- [x] JWT + RBAC è®¤è¯æˆæƒ
- [x] Token åˆ·æ–°æœºåˆ¶
- [x] è¯·æ±‚é™æµ
- [x] å®¡è®¡æ—¥å¿—
- [x] å‰ç«¯ UI (11 ä¸ªé¡µé¢)
- [x] å‘Šè­¦è§„åˆ™å¼•æ“

### è§„åˆ’ä¸­ ğŸ“‹

- [ ] å¥åº·è¯„ä¼°å¼•æ“
- [ ] æ•…éšœé¢„æµ‹æ¨¡å‹
- [ ] Modbus TCP åè®®
- [ ] Docker éƒ¨ç½²
- [ ] TimescaleDB è¿ç§»

---

## ğŸ“ ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | ä¸»è¦å˜æ›´ |
|------|------|----------|
| **v56** | **2025-01-01** | **LibPlcTag æ¨¡æ‹Ÿæ¨¡å¼ + å‰ç«¯æ”¯æŒ** â­ |
| v54 | 2025-01-01 | ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ |
| v44 | 2025-12-30 | è¯·æ±‚é™æµ + å®¡è®¡å¢å¼º |
| v43 | 2025-12-30 | SignalR æˆæƒ + JWT å¯†é’¥å¤–ç½® |
| v56 | 2025-12-30 | API å…¼å®¹æ€§ä¿®å¤ |
| v39 | 2025-12 | Token åˆ·æ–°æœºåˆ¶ |
| v38 | 2025-12 | RBAC æƒé™ |
| v35 | 2025-12 | JWT è®¤è¯ |

---

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [CHANGELOG_V55.md](./docs/CHANGELOG_V55.md) | v56 å˜æ›´æ—¥å¿— â­ |
| [PROJECT_KNOWLEDGE.md](./docs/PROJECT_KNOWLEDGE.md) | é¡¹ç›®çŸ¥è¯†åº“ |

---

## ğŸ“„ License

Proprietary - All Rights Reserved

---

## ğŸ¤ è´¡çŒ®

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ– PRã€‚
